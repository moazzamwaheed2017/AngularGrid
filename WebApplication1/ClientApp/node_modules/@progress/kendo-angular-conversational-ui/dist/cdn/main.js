!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("tslib"),require("@angular/core"),require("@progress/kendo-angular-l10n"),require("@progress/kendo-angular-intl"),require("@progress/kendo-angular-buttons"),require("@angular/common"),require("@progress/kendo-angular-common"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define(["tslib","@angular/core","@progress/kendo-angular-l10n","@progress/kendo-angular-intl","@progress/kendo-angular-buttons","@angular/common","@progress/kendo-angular-common","rxjs","rxjs/operators"],t):"object"==typeof exports?exports.KendoAngularConversationalUi=t(require("tslib"),require("@angular/core"),require("@progress/kendo-angular-l10n"),require("@progress/kendo-angular-intl"),require("@progress/kendo-angular-buttons"),require("@angular/common"),require("@progress/kendo-angular-common"),require("rxjs"),require("rxjs/operators")):e.KendoAngularConversationalUi=t(e.tslib,e["@angular/core"],e["@progress/kendo-angular-l10n"],e["@progress/kendo-angular-intl"],e["@progress/kendo-angular-buttons"],e["@angular/common"],e["@progress/kendo-angular-common"],e.rxjs,e["rxjs/operators"])}(window,function(e,t,n,a,o,s,r,i,c){return function(e){var t={};function n(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(a,o,function(t){return e[t]}.bind(null,o));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=11)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(12);t.ChatComponent=a.ChatComponent;var o=n(7);t.AttachmentTemplateDirective=o.AttachmentTemplateDirective;var s=n(4);t.MessageTemplateDirective=s.MessageTemplateDirective},function(e,t){e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(1),s=function(){function e(e){this.templateRef=e}return e=a.__decorate([o.Directive({selector:"[kendoChatMessageTemplate]"}),a.__param(0,o.Optional()),a.__metadata("design:paramtypes",[o.TemplateRef])],e)}();t.MessageTemplateDirective=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){return function(){}}();t.ChatItem=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){return function(e){this.message=e}}();t.SendMessageEvent=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(1),s=function(){function e(e){this.templateRef=e}return e=a.__decorate([o.Directive({selector:"[kendoChatAttachmentTemplate]"}),a.__param(0,o.Optional()),a.__metadata("design:paramtypes",[o.TemplateRef])],e)}();t.AttachmentTemplateDirective=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(1),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),a.__decorate([o.Input(),a.__metadata("design:type",String)],t.prototype,"messagePlaceholder",void 0),a.__decorate([o.Input(),a.__metadata("design:type",String)],t.prototype,"send",void 0),t}(n(3).ComponentMessages);t.Messages=s},function(e,t){e.exports=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=function(e){function t(t,n){var a=e.call(this)||this;return a.action=t,a.message=n,a}return a.__extends(t,e),t}(n(28).PreventableEvent);t.ExecuteActionEvent=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0);a.__exportStar(n(2),t),a.__exportStar(n(14),t),a.__exportStar(n(10),t),a.__exportStar(n(6),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(1),s=n(7),r=n(3),i=n(13),c=n(4),l=n(6),u=function(){function e(e,t){var n=this;this.localization=e,this.zone=t,this.sendMessage=new o.EventEmitter,this.executeAction=new o.EventEmitter,this.autoScroll=!0,this.direction=e.rtl?"rtl":"ltr",this.localizationChangeSubscription=e.changes.subscribe(function(e){var t=e.rtl;n.direction=t?"rtl":"ltr"})}return Object.defineProperty(e.prototype,"className",{get:function(){return"k-widget k-chat"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dirAttr",{get:function(){return this.direction},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(){var e=this;this.zone.runOutsideAngular(function(){return setTimeout(function(){e.messageList.nativeElement.style.flex="1 1 auto"})})},e.prototype.ngAfterViewInit=function(){if(o.isDevMode()&&!this.user)throw new Error("User must be set and have a valid id.")},e.prototype.ngOnDestroy=function(){this.localizationChangeSubscription&&this.localizationChangeSubscription.unsubscribe()},e.prototype.sendClick=function(){var e=this.messageInput.nativeElement,t=e.value;if(t){var n={author:this.user,text:t,timestamp:new Date};this.sendMessage.emit(new l.SendMessageEvent(n)),e.value=null,e.focus(),this.autoScroll=!0}},e.prototype.inputKeydown=function(e){13===e.keyCode&&this.sendClick()},e.prototype.dispatchAction=function(e){(this.executeAction.emit(e),e.isDefaultPrevented())||(i.makeHandler(e.action)(e.action,this),this.messageInput.nativeElement.focus())},e.prototype.textFor=function(e){return this.localization.get(e)},a.__decorate([o.Input(),a.__metadata("design:type",Array)],e.prototype,"messages",void 0),a.__decorate([o.Input(),a.__metadata("design:type",Object)],e.prototype,"user",void 0),a.__decorate([o.Output(),a.__metadata("design:type",o.EventEmitter)],e.prototype,"sendMessage",void 0),a.__decorate([o.Output(),a.__metadata("design:type",o.EventEmitter)],e.prototype,"executeAction",void 0),a.__decorate([o.HostBinding("class"),a.__metadata("design:type",String),a.__metadata("design:paramtypes",[])],e.prototype,"className",null),a.__decorate([o.HostBinding("attr.dir"),a.__metadata("design:type",String),a.__metadata("design:paramtypes",[])],e.prototype,"dirAttr",null),a.__decorate([o.ContentChild(s.AttachmentTemplateDirective),a.__metadata("design:type",s.AttachmentTemplateDirective)],e.prototype,"attachmentTemplate",void 0),a.__decorate([o.ContentChild(c.MessageTemplateDirective),a.__metadata("design:type",c.MessageTemplateDirective)],e.prototype,"messageTemplate",void 0),a.__decorate([o.ViewChild("messageInput"),a.__metadata("design:type",o.ElementRef)],e.prototype,"messageInput",void 0),a.__decorate([o.ViewChild("messageList"),a.__metadata("design:type",o.ElementRef)],e.prototype,"messageList",void 0),e=a.__decorate([o.Component({providers:[r.LocalizationService,{provide:r.L10N_PREFIX,useValue:"kendo.chat"}],selector:"kendo-chat",template:'\n    <ng-container\n      kendoChatLocalizedMessages\n      i18n-messagePlaceholder="kendo.chat.messagePlaceholder|The placholder text of the message text input"\n      messagePlaceholder="Type a message..."\n\n      i18n-send="kendo.chat.send|The text for the Send button"\n      send="Send..."\n    >\n    </ng-container>\n\n    <div\n      #messageList\n      class="k-message-list k-avatars"\n      aria-live="polite" role="log"\n      kendoChatScrollAnchor\n        #anchor="scrollAnchor"\n        [(autoScroll)]="autoScroll"\n    >\n      <kendo-chat-message-list\n        [messages]="messages"\n        [messageTemplate]="messageTemplate"\n        [attachmentTemplate]="attachmentTemplate"\n        [user]="user"\n        (executeAction)="dispatchAction($event)"\n        (resize)="anchor.scrollToBottom()"\n        (navigate)="this.autoScroll = false"\n      >\n      </kendo-chat-message-list>\n    </div>\n\n    <div class="k-message-box">\n      <input\n        #messageInput\n        kendoChatFocusedState\n        type="text"\n        class="k-input"\n        [placeholder]="textFor(\'messagePlaceholder\')"\n        (keydown)="inputKeydown($event)"\n      >\n      <button\n        kendoButton\n            look="flat"\n        class="k-button-send"\n        tabindex="-1"\n        [attr.title]="textFor(\'send\')"\n        (click)="sendClick()"\n      ><svg version="1.1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 16 16"><path d="M0,14.3c-0.1,0.6,0.3,0.8,0.8,0.6l14.8-6.5c0.5-0.2,0.5-0.6,0-0.8L0.8,1.1C0.3,0.9-0.1,1.1,0,1.7l0.7,4.2C0.8,6.5,1.4,7,1.9,7.1l8.8,0.8c0.6,0.1,0.6,0.1,0,0.2L1.9,8.9C1.4,9,0.8,9.5,0.7,10.1L0,14.3z"/></svg></button>\n    </div>\n  '}),a.__metadata("design:paramtypes",[r.LocalizationService,o.NgZone])],e)}();t.ChatComponent=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),o=function(){},s={reply:function(e,t){t.sendMessage.emit(new a.SendMessageEvent({author:t.user,text:e.value,timestamp:new Date}))},call:function(e){window.open("tel:"+e.value)},openUrl:function(e){window.open(e.value)}};t.makeHandler=function(e){return s[e.type]||o}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(15),s=n(2),r=n(16),i=n(17),c=n(18),l=n(19),u=n(20),d=n(21),p=n(22),m=n(23),g=n(26),f=n(27),_=n(1),h=n(31),v=n(32),y=[s.ChatComponent,l.CustomMessagesComponent,s.AttachmentTemplateDirective,s.MessageTemplateDirective,d.HeroCardComponent],b=[o.AttachmentComponent,u.FocusedStateDirective,p.LocalizedMessagesDirective,m.MessageAttachmentsComponent,g.MessageComponent,f.MessageListComponent,s.MessageTemplateDirective,h.ScrollAnchorDirective,v.SuggestedActionsComponent],k=function(){function e(){}return e=a.__decorate([_.NgModule({declarations:y.concat(b),exports:[y],imports:[r.ButtonModule,i.CommonModule,c.ResizeSensorModule]})],e)}();t.ChatModule=k},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(1),s=n(2),r=function(){function e(){}return Object.defineProperty(e.prototype,"attachment",{get:function(){return this._attachment},set:function(e){this._attachment=e,this.context={$implicit:this.attachment}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"image",{get:function(){return 0===this.contentType.indexOf("image/")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"unknown",{get:function(){return!this.image},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentType",{get:function(){return this.attachment.contentType||""},enumerable:!0,configurable:!0}),a.__decorate([o.Input(),a.__metadata("design:type",Object),a.__metadata("design:paramtypes",[Object])],e.prototype,"attachment",null),a.__decorate([o.Input(),a.__metadata("design:type",s.AttachmentTemplateDirective)],e.prototype,"template",void 0),e=a.__decorate([o.Component({selector:"kendo-chat-attachment",template:'\n    <ng-container *ngIf="template">\n      <ng-container *ngTemplateOutlet="template.templateRef; context: context;">\n      </ng-container>\n    </ng-container>\n\n    <div *ngIf="!template" class="k-card">\n      <div class="k-card-body">\n        <h5 class="k-card-title" *ngIf="attachment.title">\n          {{ attachment.title }}\n        </h5>\n        <h6 class="k-card-subtitle" *ngIf="attachment.subtitle">\n          {{ attachment.subtitle }}\n        </h6>\n        <img *ngIf="image" [attr.src]="attachment.content" />\n        <ng-container *ngIf="unknown">\n          {{ attachment.content }}\n        </ng-container>\n      </div>\n    </div>\n  '})],e)}();t.AttachmentComponent=r},function(e,t){e.exports=o},function(e,t){e.exports=s},function(e,t){e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(1),s=n(3),r=n(8),i=function(e){function t(t){var n=e.call(this)||this;return n.service=t,n}var n;return a.__extends(t,e),n=t,Object.defineProperty(t.prototype,"override",{get:function(){return!0},enumerable:!0,configurable:!0}),t=n=a.__decorate([o.Component({providers:[{provide:r.Messages,useExisting:o.forwardRef(function(){return n})}],selector:"kendo-chat-messages",template:""}),a.__metadata("design:paramtypes",[s.LocalizationService])],t)}(r.Messages);t.CustomMessagesComponent=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(1),s=function(){function e(){this.focused=!1}return e.prototype.onFocus=function(){this.focused=!0},e.prototype.onBlur=function(){this.focused=!1},a.__decorate([o.HostBinding("class.k-state-focused"),a.__metadata("design:type",Boolean)],e.prototype,"focused",void 0),a.__decorate([o.HostListener("focusin"),a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[]),a.__metadata("design:returntype",void 0)],e.prototype,"onFocus",null),a.__decorate([o.HostListener("focusout"),a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[]),a.__metadata("design:returntype",void 0)],e.prototype,"onBlur",null),e=a.__decorate([o.Directive({selector:"[kendoChatFocusedState]"})],e)}();t.FocusedStateDirective=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(1),s=function(){function e(){this.cssClass=!0,this.executeAction=new o.EventEmitter}return e.prototype.onClick=function(e){this.executeAction.next(e)},a.__decorate([o.Input(),a.__metadata("design:type",String)],e.prototype,"imageUrl",void 0),a.__decorate([o.Input(),a.__metadata("design:type",String)],e.prototype,"title",void 0),a.__decorate([o.Input(),a.__metadata("design:type",String)],e.prototype,"subtitle",void 0),a.__decorate([o.Input(),a.__metadata("design:type",Array)],e.prototype,"actions",void 0),a.__decorate([o.HostBinding("class.k-card"),a.__metadata("design:type",Boolean)],e.prototype,"cssClass",void 0),a.__decorate([o.Output(),a.__metadata("design:type",o.EventEmitter)],e.prototype,"executeAction",void 0),e=a.__decorate([o.Component({selector:"kendo-chat-hero-card",template:'\n    <img class="k-card-image" [src]="imageUrl" *ngIf="imageUrl" />\n    <div class="k-card-body">\n      <h5 class="k-card-title" *ngIf="title">\n        {{ title }}\n      </h5>\n      <h6 class="k-card-subtitle" *ngIf="subtitle">\n        {{ subtitle }}\n      </h6>\n    </div>\n    <div class="k-card-actions k-card-actions-vertical">\n      <span class="k-card-action"\n            *ngFor="let act of actions"\n      >\n        <button\n          kendoButton look="flat"\n          (click)="onClick(act)">\n          {{ act.title }}\n        </button>\n      </span>\n    </div>\n  '})],e)}();t.HeroCardComponent=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(1),s=n(3),r=n(8),i=function(e){function t(t){var n=e.call(this)||this;return n.service=t,n}var n;return a.__extends(t,e),n=t,t=n=a.__decorate([o.Directive({providers:[{provide:r.Messages,useExisting:o.forwardRef(function(){return n})}],selector:"[kendoChatLocalizedMessages]"}),a.__metadata("design:paramtypes",[s.LocalizationService])],t)}(r.Messages);t.LocalizedMessagesDirective=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(1),s=n(24),r=n(25),i=n(5),c=n(2),l=function(e){function t(t){var n,a,o=e.call(this)||this;return o.zone=t,o.scrollPosition=0,o.selectedIndex=0,o.carouselKeyHandlers=((n={})[37]=function(e){return o.navigateTo(e,-1)},n[39]=function(e){return o.navigateTo(e,1)},n),o.listKeyHandlers=((a={})[38]=function(e){return o.navigateTo(e,-1)},a[40]=function(e){return o.navigateTo(e,1)},a),o}var n;return a.__extends(t,e),n=t,Object.defineProperty(t.prototype,"carousel",{get:function(){return"list"!==this.layout},enumerable:!0,configurable:!0}),t.prototype.ngAfterViewInit=function(){var e=this;this.zone.runOutsideAngular(function(){e.scrollSubscription=s.fromEvent(e.deck.nativeElement,"scroll").pipe(r.debounceTime(100)).subscribe(function(){return e.onScroll()})})},t.prototype.ngOnDestroy=function(){this.scrollSubscription.unsubscribe()},t.prototype.isSelected=function(e){return this.selectedIndex===e},t.prototype.itemKeydown=function(e,t){var n=("list"===this.layout?this.listKeyHandlers:this.carouselKeyHandlers)[e.keyCode];n&&n(e,t)},t.prototype.itemClick=function(e){this.select(e)},t.prototype.focus=function(){this.select(this.selectedIndex)},t.prototype.scrollTo=function(e){var t=this.deck.nativeElement,n=t.scrollWidth/this.items.length,a=t.scrollWidth-t.offsetWidth,o=t.scrollLeft+n*e;t.scrollLeft=Math.max(0,Math.min(a,o))},t.prototype.select=function(e){this.selectedIndex=e;var t=this.items.toArray()[e];t&&t.nativeElement.focus()},t.prototype.navigateTo=function(e,t){var n=this.selectedIndex,a=Math.max(0,Math.min(n+t,this.items.length-1));a!==n&&(this.select(a),e.preventDefault())},t.prototype.onScroll=function(){var e=this,t=this.deck.nativeElement;if(0!==t.scrollWidth){var n=t.scrollLeft/(t.scrollWidth-t.offsetWidth);n!==this.scrollPosition&&this.zone.run(function(){e.scrollPosition=n})}},a.__decorate([o.Input(),a.__metadata("design:type",Array)],t.prototype,"attachments",void 0),a.__decorate([o.Input(),a.__metadata("design:type",String)],t.prototype,"layout",void 0),a.__decorate([o.Input(),a.__metadata("design:type",Boolean)],t.prototype,"tabbable",void 0),a.__decorate([o.Input(),a.__metadata("design:type",c.AttachmentTemplateDirective)],t.prototype,"template",void 0),a.__decorate([o.HostBinding("class.k-card-deck-scrollwrap"),a.__metadata("design:type",Boolean),a.__metadata("design:paramtypes",[])],t.prototype,"carousel",null),a.__decorate([o.ViewChild("deck",{read:o.ElementRef}),a.__metadata("design:type",o.ElementRef)],t.prototype,"deck",void 0),a.__decorate([o.ViewChildren("item",{read:o.ElementRef}),a.__metadata("design:type",o.QueryList)],t.prototype,"items",void 0),t=n=a.__decorate([o.Component({providers:[{provide:i.ChatItem,useExisting:o.forwardRef(function(){return n})}],selector:"kendo-chat-message-attachments",template:'\n    <button\n      *ngIf="carousel && scrollPosition > 0"\n      (click)="scrollTo(-1)"\n      class="k-button k-button-icon"\n      tabindex="-1">\n        <span class="k-icon k-i-arrow-chevron-left"></span>\n    </button>\n    <div #deck [class.k-card-deck]="carousel">\n      <kendo-chat-attachment #item\n        *ngFor="let att of attachments; index as index; first as first; last as last"\n        [attachment]="att"\n        [template]="template"\n        [class.k-state-selected]="isSelected(index)"\n        [class.k-state-focused]="isSelected(index)"\n        [class.k-card-wrap]="true"\n        [class.k-first]="first"\n        [class.k-last]="last"\n        [attr.tabindex]="tabbable && isSelected(index) ? \'0\' : \'-1\'"\n        (click)="itemClick(index)"\n        (keydown)="itemKeydown($event, att)"\n      >\n      </kendo-chat-attachment>\n    </div>\n    <button\n      *ngIf="carousel && scrollPosition < 1"\n      (click)="scrollTo(1)"\n      class="k-button k-button-icon"\n      tabindex="-1">\n        <span class="k-icon k-i-arrow-chevron-right"></span>\n    </button>\n  '}),a.__metadata("design:paramtypes",[o.NgZone])],t)}(i.ChatItem);t.MessageAttachmentsComponent=l},function(e,t){e.exports=i},function(e,t){e.exports=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(1),s=n(5),r=n(4),i=n(9),c=function(e){function t(t,n){var a=e.call(this)||this;return a.element=t,a.intl=n,a.cssClass=!0,a}var n;return a.__extends(t,e),n=t,Object.defineProperty(t.prototype,"tabIndex",{get:function(){return this.tabbable?"0":"-1"},enumerable:!0,configurable:!0}),t.prototype.formatTimeStamp=function(e){return this.intl.formatDate(e,{datetime:"short"})},t.prototype.focus=function(){this.element.nativeElement.focus()},a.__decorate([o.Input(),a.__metadata("design:type",Object)],t.prototype,"message",void 0),a.__decorate([o.Input(),a.__metadata("design:type",Boolean)],t.prototype,"tabbable",void 0),a.__decorate([o.Input(),a.__metadata("design:type",r.MessageTemplateDirective)],t.prototype,"template",void 0),a.__decorate([o.HostBinding("class.k-message"),a.__metadata("design:type",Boolean)],t.prototype,"cssClass",void 0),a.__decorate([o.HostBinding("class.k-state-selected"),o.HostBinding("class.k-state-focused"),a.__metadata("design:type",Boolean)],t.prototype,"selected",void 0),a.__decorate([o.HostBinding("attr.tabIndex"),a.__metadata("design:type",String),a.__metadata("design:paramtypes",[])],t.prototype,"tabIndex",null),t=n=a.__decorate([o.Component({selector:"kendo-chat-message",providers:[{provide:s.ChatItem,useExisting:o.forwardRef(function(){return n})}],template:'\n    <time\n      [attr.aria-hidden]="!selected"\n      class="k-message-time"\n      *ngIf="message.timestamp"\n    >\n      {{ formatTimeStamp(message.timestamp) }}\n    </time>\n\n    <ng-container *ngIf="!message.typing; else typing">\n      <div class="k-bubble" *ngIf="template">\n        <ng-container\n          *ngTemplateOutlet="template.templateRef; context: { $implicit: message };"\n        >\n        </ng-container>\n      </div>\n\n      <div class="k-bubble" *ngIf="!template && message.text">\n        {{message.text}}\n      </div>\n    </ng-container>\n\n    <span\n      class="k-message-status"\n      *ngIf="message.status"\n    >\n      {{ message.status }}\n    </span>\n\n    <ng-template #typing>\n      <div class="k-bubble">\n        <div class="k-typing-indicator">\n          <span></span>\n          <span></span>\n          <span></span>\n        </div>\n      </div>\n    </ng-template>\n  '}),a.__metadata("design:paramtypes",[o.ElementRef,i.IntlService])],t)}(s.ChatItem);t.MessageComponent=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(1),s=n(10),r=n(29),i=n(5),c=n(30),l=n(2),u=n(4),d=n(9),p=function(){function e(e,t){var n,a=this;this.element=e,this.intl=t,this.executeAction=new o.EventEmitter,this.navigate=new o.EventEmitter,this.resize=new o.EventEmitter,this.cssClass=!0,this.view=[],this.keyActions=((n={})[38]=function(e){return a.navigateTo(e,-1)},n[40]=function(e){return a.navigateTo(e,1)},n)}return Object.defineProperty(e.prototype,"messages",{get:function(){return this._messages},set:function(e){var t=e||[];this.view=c.chatView(t),this._messages=t},enumerable:!0,configurable:!0}),e.prototype.ngAfterViewInit=function(){this.selectedItem=this.items.last},e.prototype.onResize=function(){this.resize.emit()},e.prototype.formatTimeStamp=function(e){return this.intl.formatDate(e,{date:"full"})},e.prototype.onKeydown=function(e){var t=this.keyActions[e.keyCode];t&&t(e)},e.prototype.onBlur=function(e){var t=this,n=e.relatedTarget||document.activeElement;!r.closest(n,function(e){return e===t.element.nativeElement})&&this.select(null)},e.prototype.isOwnMessage=function(e){return c.isAuthor(this.user,e)},e.prototype.dispatchAction=function(e,t){var n=new s.ExecuteActionEvent(e,t);this.executeAction.emit(n)},e.prototype.trackGroup=function(e,t){return t.trackBy},e.prototype.select=function(e){var t=this.selectedItem;t&&(t.selected=!1),e&&(e.selected=!0,this.selectedItem=e)},e.prototype.last=function(e){if(e&&0!==e.length)return e[e.length-1]},e.prototype.navigateTo=function(e,t){var n=this.items.toArray(),a=this.selectedItem,o=n.indexOf(a),s=n[Math.max(0,Math.min(o+t,this.items.length-1))];s!==a&&(this.select(s),s.focus(),this.navigate.emit(),e.preventDefault())},a.__decorate([o.Input(),a.__metadata("design:type",Array),a.__metadata("design:paramtypes",[Array])],e.prototype,"messages",null),a.__decorate([o.Input(),a.__metadata("design:type",l.AttachmentTemplateDirective)],e.prototype,"attachmentTemplate",void 0),a.__decorate([o.Input(),a.__metadata("design:type",u.MessageTemplateDirective)],e.prototype,"messageTemplate",void 0),a.__decorate([o.Input(),a.__metadata("design:type",Object)],e.prototype,"user",void 0),a.__decorate([o.Output(),a.__metadata("design:type",o.EventEmitter)],e.prototype,"executeAction",void 0),a.__decorate([o.Output(),a.__metadata("design:type",o.EventEmitter)],e.prototype,"navigate",void 0),a.__decorate([o.Output(),a.__metadata("design:type",o.EventEmitter)],e.prototype,"resize",void 0),a.__decorate([o.ViewChildren(i.ChatItem),a.__metadata("design:type",o.QueryList)],e.prototype,"items",void 0),a.__decorate([o.HostBinding("class.k-message-list-content"),a.__metadata("design:type",Boolean)],e.prototype,"cssClass",void 0),a.__decorate([o.HostListener("keydown",["$event"]),a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Object]),a.__metadata("design:returntype",void 0)],e.prototype,"onKeydown",null),a.__decorate([o.HostListener("focusout",["$event"]),a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[FocusEvent]),a.__metadata("design:returntype",void 0)],e.prototype,"onBlur",null),e=a.__decorate([o.Component({selector:"kendo-chat-message-list",template:'\n    <ng-container *ngFor="let group of view; last as lastGroup; trackBy: trackGroup">\n      <ng-container [ngSwitch]="group.type">\n        <div\n          *ngSwitchCase="\'date-marker\'"\n          class="k-timestamp"\n        >\n          {{ formatTimeStamp(group.timestamp) }}\n        </div>\n        <div\n          *ngSwitchCase="\'message-group\'"\n          class="k-message-group"\n          [class.k-alt]="isOwnMessage(group.messages[0])"\n          [class.k-no-avatar]="!group.author.avatarUrl"\n        >\n          <img\n            *ngIf="group.author.avatarUrl"\n            [attr.src]="group.author.avatarUrl"\n            class="k-avatar"\n          />\n          <p *ngIf="group.author.name" class="k-author">{{ group.author.name }}</p>\n          <ng-container\n              *ngFor="let msg of group.messages; first as firstMessage; last as lastMessage"\n          >\n            <img *ngIf="msg.user?.avatarUrl" [src]="msg.user?.avatarUrl" class="k-avatar">\n            <kendo-chat-message #message\n              [message]="msg"\n              [tabbable]="lastGroup && lastMessage"\n              [template]="messageTemplate"\n              (click)="select(message)"\n              (focus)="select(message)"\n              [class.k-only]="group.messages.length === 1"\n              [class.k-first]="group.messages.length > 1 && firstMessage"\n              [class.k-last]="group.messages.length > 1 && lastMessage"\n            >\n            </kendo-chat-message>\n\n            <kendo-chat-attachment\n              *ngIf="msg.attachments && msg.attachments.length === 1"\n              [attachment]="msg.attachments[0]"\n              [template]="attachmentTemplate"\n              >\n            </kendo-chat-attachment>\n          </ng-container>\n        </div>\n\n        <kendo-chat-message-attachments #attachments\n          *ngSwitchCase="\'attachment-group\'"\n          [attachments]="group.attachments"\n          [layout]="group.attachmentLayout"\n          [tabbable]="lastGroup"\n          [template]="attachmentTemplate"\n          (click)="select(attachments)"\n          (focus)="select(attachments)"\n        >\n        </kendo-chat-message-attachments>\n\n        <kendo-chat-suggested-actions #actions\n          *ngSwitchCase="\'action-group\'"\n          [actions]="group.actions"\n          [tabbable]="lastGroup"\n          (dispatch)="dispatchAction($event, last(group.messages))"\n          (click)="select(actions)"\n          (focus)="select(actions)"\n        >\n        </kendo-chat-suggested-actions>\n      </ng-container>\n    </ng-container>\n    <kendo-resize-sensor (resize)="onResize()">\n    </kendo-resize-sensor>\n  '}),a.__metadata("design:paramtypes",[o.ElementRef,d.IntlService])],e)}();t.MessageListComponent=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(){this.prevented=!1}return e.prototype.preventDefault=function(){this.prevented=!0},e.prototype.isDefaultPrevented=function(){return this.prevented},e}();t.PreventableEvent=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.closest=function(e,t){for(;e&&!t(e);)e=e.parentNode;return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(1);t.isAuthor=function(e,t){return e&&t.author&&e.id===t.author.id};var o=function(e){return e[e.length-1]},s=function(e){return function(n,s,r){var i=r===e-1;return function(e,t){var n,a,s=t.timestamp,r=o(e);if(s&&(!r||(n=s,a=r.timestamp,n&&a&&(a.getDate()!==n.getDate()||a.getMonth()!==n.getMonth()||a.getFullYear()!==n.getFullYear())))){var i={type:"date-marker",timestamp:s,trackBy:s.getTime()};e.push(i)}}(n,s),function(e,n,s){var r,i=o(e);if(a.isDevMode()&&!n.author)throw new Error("Author must be set for message: "+JSON.stringify(n));n.typing&&!s||(i&&"message-group"===i.type&&(r=i.messages),r&&t.isAuthor(n.author,o(r))?r.push(n):e.push({type:"message-group",messages:[n],author:n.author,timestamp:n.timestamp,trackBy:n}))}(n,s,i),s.attachments&&s.attachments.length>1&&n.push({type:"attachment-group",attachments:s.attachments,attachmentLayout:s.attachmentLayout,timestamp:s.timestamp,trackBy:s}),s.suggestedActions&&i&&n.push({type:"action-group",actions:s.suggestedActions,timestamp:s.timestamp,trackBy:s}),n}};t.chatView=function(e){return e.reduce(s(e.length),[])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(1),s=function(){function e(e,t,n){this.element=e,this.zone=t,this.renderer=n,this.autoScroll=!0,this.autoScrollChange=new o.EventEmitter,this.overflowAnchor="none",this.scrolling=!1}return e.prototype.ngOnInit=function(){var e=this;this.zone.runOutsideAngular(function(){e.unsubscribe=e.renderer.listen(e.element.nativeElement,"scroll",function(){return e.onScroll()})})},e.prototype.ngAfterViewInit=function(){this.scrollToBottom()},e.prototype.ngOnDestroy=function(){this.unsubscribe&&this.unsubscribe()},e.prototype.onScroll=function(){var e=this;if(!this.scrolling){var t=this.element.nativeElement,n=t.scrollTop+t.offsetHeight,a=t.scrollHeight-n<2;this.autoScroll!==a&&this.zone.run(function(){e.autoScroll=a,e.autoScrollChange.emit(e.autoScroll)})}},e.prototype.scrollToBottom=function(){var e=this;if(this.autoScroll){var t=this.element.nativeElement;t.scrollTop=t.scrollHeight-t.clientHeight,this.scrolling=!0,this.zone.runOutsideAngular(function(){return setTimeout(function(){return e.scrolling=!1},1e3)})}},a.__decorate([o.Input(),a.__metadata("design:type",Boolean)],e.prototype,"autoScroll",void 0),a.__decorate([o.Output(),a.__metadata("design:type",o.EventEmitter)],e.prototype,"autoScrollChange",void 0),a.__decorate([o.HostBinding("style.overflow-anchor"),a.__metadata("design:type",String)],e.prototype,"overflowAnchor",void 0),e=a.__decorate([o.Directive({selector:"[kendoChatScrollAnchor]",exportAs:"scrollAnchor"}),a.__metadata("design:paramtypes",[o.ElementRef,o.NgZone,o.Renderer2])],e)}();t.ScrollAnchorDirective=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(1),s=n(5),r=function(e){function t(){var t,n=null!==e&&e.apply(this,arguments)||this;return n.dispatch=new o.EventEmitter,n.defaultClass=!0,n.selectedIndex=0,n.keyHandlers=((t={})[37]=function(e){return n.navigateTo(e,-1)},t[39]=function(e){return n.navigateTo(e,1)},t[13]=function(e,t){return n.actionClick(t)},t),n}var n;return a.__extends(t,e),n=t,t.prototype.isSelected=function(e){return this.selected&&this.selectedIndex===e},t.prototype.actionClick=function(e){this.dispatch.next(e)},t.prototype.actionKeydown=function(e,t){var n=this.keyHandlers[e.keyCode];n&&n(e,t)},t.prototype.focus=function(){this.select(this.selectedIndex)},t.prototype.select=function(e){this.selectedIndex=e;var t=this.items.toArray()[e];t&&t.nativeElement.focus()},t.prototype.navigateTo=function(e,t){var n=this.selectedIndex,a=Math.max(0,Math.min(n+t,this.items.length-1));a!==n&&(this.select(a),e.preventDefault())},a.__decorate([o.Input(),a.__metadata("design:type",Array)],t.prototype,"actions",void 0),a.__decorate([o.Input(),a.__metadata("design:type",Boolean)],t.prototype,"tabbable",void 0),a.__decorate([o.Output(),a.__metadata("design:type",o.EventEmitter)],t.prototype,"dispatch",void 0),a.__decorate([o.HostBinding("class.k-quick-replies"),a.__metadata("design:type",Boolean)],t.prototype,"defaultClass",void 0),a.__decorate([o.ViewChildren("item"),a.__metadata("design:type",o.QueryList)],t.prototype,"items",void 0),t=n=a.__decorate([o.Component({selector:"kendo-chat-suggested-actions",providers:[{provide:s.ChatItem,useExisting:o.forwardRef(function(){return n})}],template:'\n    <span #item\n      *ngFor="let action of actions; index as index; first as first; last as last"\n      class="k-quick-reply"\n      [class.k-state-selected]="isSelected(index)"\n      [class.k-state-focused]="isSelected(index)"\n      [class.k-first]="first"\n      [class.k-last]="last"\n      [attr.tabindex]="tabbable && selectedIndex === index ? \'0\' : \'-1\'"\n      (click)="actionClick(action)"\n      (keydown)="actionKeydown($event, action)"\n    >\n      {{ action.title || action.value }}\n    </span>\n  '})],t)}(s.ChatItem);t.SuggestedActionsComponent=r}])});